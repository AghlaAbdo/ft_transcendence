services:
  nginx:
    build:
      target: base
    volumes:
      - ./services/nginx/config/nginx.conf:/etc/nginx/nginx.conf:ro
    depends_on:
      - chat-service
      # - game-service
      # - user-service
      - nextjs

  nextjs:
    build:
      target: development
    volumes:
      - ./frontend:/app

  game-service:
    build:
      target: development
    volumes:
      - ./services/game-service:/app
    env_file:
      ./services/game-service/.env.dev

  user-service:
    build:
      target: development
    env_file:
      ./services/user-service/.env
    volumes:
      - ./services/user-service/:/app

  chat-service:
    build:
      target: base
    volumes:
      - ./chat-service/back-end/src:/app/src
      - ./chat-service/back-end/chat.db:/app/chat.db